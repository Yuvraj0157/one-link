<!-- include header -->
<%-include('include/_header')%>
<!-- /include header -->
 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


<style>
    #handle_form {
        display: flex;
        flex-direction: column;
        width: 55%;
        margin-top: 2px;
        margin-bottom: 23px;
    }
    
    .form_ {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }
    
    .form_elem {
        margin: 4px 0px;
    }
    
    @media screen and (max-width: 600px) {
        #handle_form {
            width: 80%;
        }
    }
    
    .form-label {
        margin-bottom: 0.15rem;
    }
    
</style>

 <!-- Main Site -->
 <main id="site-main">
    <div class="container">
        <div class="box-nav d-flex justify-between">
           <div class="filter">
               <a href="/dashboard" style="text-decoration: none;"><i class="fas fa-angle-double-left"></i> Dashboard</a>
           </div>
        </div>
        <div class="form-title text-center">
            <h2 class="text-dark">Handles</h2>
        </div>
        <div class="form_">
            <form id="handle_form">
                <div class="form_elem">
                    <label for="exampleInputEmail1" class="form-label">Email address</label>
                    <input type="email" placeholder="your@emailaddress.com" class="form-control" id="email_url" name="email" value="<%= data.handles.email || '' %>">
                </div>
                <div class="form_elem">
                    <label for="facebook_page_url" class="form-label">Facebook Page</label>
                    <input type="url" placeholder="https://facebook.com/facebookpageurl" class="form-control" id="facebook_url" name="facebook" value="<%= data.handles.facebook || '' %>">
                </div>
                <div class="form_elem">
                    <label for="twitter_link" class="form-label">Twitter</label>
                    <input type="url" placeholder="https://X.com/...." class="form-control" id="twitter_url" name="twitter" value="<%= data.handles.twitter || '' %>">
                </div>
                <div class="form_elem">
                    <label for="instagram_username" class="form-label">Instagram</label>
                    <input type="url" placeholder="https://..." class="form-control" id="instagram_url" name="instagram" value="<%= data.handles.instagram || '' %>">
                </div>
                <div class="form_elem">
                    <label for="youTube_url" class="form-label">YouTube</label>
                    <input type="url" placeholder="https://youtube.com/channel/youtubechannelurl" class="form-control" id="youtube_url" name="youtube" value="<%= data.handles.youtube || '' %>">
                </div>
                <div class="form_elem">
                    <label for="linkedin_url" class="form-label">Linkedin</label>
                    <input type="url" placeholder="https://linkedin.com/in/username" class="form-control" id="linkedin_url" name="linkedin" value="<%= data.handles.linkedin || '' %>">
                </div>
                <div class="form_elem">
                    <label for="whatsapp_url" class="form-label">WhatsApp</label>
                    <input type="url" placeholder="https://..." class="form-control" id="whatsapp_url" name="whatsapp" value="<%= data.handles.whatsapp || '' %>">
                </div>
                <div class="form_elem">
                    <label for="telegram_url" class="form-label">Telegram</label>
                    <input type="url" placeholder="https://t.me/" class="form-control" id="telegram_url" name="telegram" value="<%= data.handles.telegram || '' %>">
                </div>
                <div class="form_elem">
                    <label for="signal_url" class="form-label">Signal</label>
                    <input type="url" placeholder="https://signal.group/" class="form-control" id="signal_url" name="signal" value="<%= data.handles.signal || '' %>">
                </div>
                <div class="form_elem">
                    <label for="discord_url" class="form-label">Discord</label>
                    <input type="url" placeholder="https://discord.com/invite/yourserver" class="form-control" id="discord_url" name="discord" value="<%= data.handles.discord || '' %>">
                </div>
                <div class="form_elem">
                    <label for="pinterest_url" class="form-label">Pinterest</label>
                    <input type="url" placeholder="https://pinterest.com" class="form-control" id="pinterest_url" name="pinterest" value="<%= data.handles.pinterest || '' %>">
                </div>
                <div class="form_elem">
                    <label for="tiktok_username" class="form-label">TikTok</label>
                    <input type="url" placeholder="https://..." class="form-control" id="tiktok_url" name="tiktok" value="<%= data.handles.tiktok || '' %>">
                </div>
                <div class="form_elem">
                    <label for="spotify_url" class="form-label">Spotify</label>
                    <input type="url" placeholder="open.spotifi.com/artist/artistname" class="form-control" id="spotify_url" name="spotify" value="<%= data.handles.spotify || '' %>">
                </div>
                <div class="form_elem">
                    <label for="snapchat_url" class="form-label">Snapchat</label>
                    <input type="url" placeholder="https://snapchat.com/add/yourusername" class="form-control" id="snapchat_url" name="snapchat" value="<%= data.handles.snapchat || '' %>">
                </div>
                <div class="form_elem">
                    <label for="Payment_url" class="form-label">Payment</label>
                    <input type="url" placeholder="https://venmo.com/yourusername" class="form-control" id="payment_url" name="payment" value="<%= data.handles.payment || '' %>">
                </div>
                <div class="form_elem">
                    <label for="github_url" class="form-label">Github</label>
                    <input type="url" placeholder="https://..." class="form-control" id="github_url" name="github" value="<%= data.handles.github || '' %>">
                </div>
                
                <button id="save_btn" style="margin-top: 30px;margin-bottom: 50px;height: 50px;" type="button" class="btn">Save</button>
            </form>
        </div>
    </div>
</main>
<!-- /Main Site -->
 
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('handle_form');
    const saveButton = document.getElementById('save_btn');
    const originalValues = {};

    // Save the original values of the input fields
    Array.from(form.elements).forEach(element => {
        if (element.tagName === 'INPUT') {
            originalValues[element.name] = element.value;
        }
    });

    saveButton.addEventListener('click', () => {
        const changedData = {};

        // Check for changed values
        Array.from(form.elements).forEach(element => {
            if (element.tagName === 'INPUT' && element.value !== originalValues[element.name]) {
                changedData[element.name] = element.value;
            }
        });

        // Send changed data to the backend
        if (Object.keys(changedData).length > 0) {
            fetch('/dashboard/handles', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(changedData),
            })
        } else {
            swal('No changes', 'You have not made any changes', 'info')
        }
    });
}); 
</script>

<!-- include footer -->
<%-include('include/_footer')%>
<!-- /include footer -->